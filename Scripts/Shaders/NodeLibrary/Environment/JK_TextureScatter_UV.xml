

<Node>
    <ID>Texture Scatter UV</ID>
    <DefaultName>Texture Scatter 2D</DefaultName>
    <Category>Environment/Custom/</Category>
    <Cost>0.99</Cost>
    <CostDescription>Heavy calculations and texture reads do not keep live</CostDescription>
    <Inputs>
        <Input Name="UV"></Input>
         <Input Name="Position"></Input>
    </Inputs>
    <Attributes>
        <!--===============================================================================================================-->
        <Attribute Name="Layers" PrettyName="Layers" Group="Density" Type="double" Min="1" Max="15">2</Attribute>
        <Attribute Name="Frequency" PrettyName="Density" Group="Density" Type="double" Min="0" Max="1000">500</Attribute>
         <!--===============================================================================================================-->   
        <Attribute Name="scene" PrettyName="Scene Size" Group="Scale" Type="int">1</Attribute>
        <Attribute Name="Scale" PrettyName="Scale" Group="Scale" Type="double" Min="0.001" Max="100">40</Attribute>
        <Attribute Name="NoiseScale" PrettyName="NoiseScale" Group="Scale" Type="double" Min="0.001" Max="1000">200</Attribute>
        <Attribute Name="jitterScale" PrettyName="JitterScale" Group="Scale" Type="double" Min="0" Max="1000">200</Attribute>
        <!--===============================================================================================================-->
        <Attribute Name="rot_min" PrettyName="Min Rotation" Group="Rotation" Type="double" Min="-360" Max="360">-300</Attribute>
        <Attribute Name="rot_max" PrettyName="Max Rotation" Group="Rotation" Type="double" Min="-360" Max="360">300</Attribute>
        <!--===============================================================================================================-->
        <Attribute Name="TextureCount" PrettyName="Texture Slots" Group="Texture Count" Type="int" Min="1" Max="4">1</Attribute>
        <Attribute Name="BlendMode" PrettyName="Texture Blend Mode" Group="Texture Count" Type="stringlist">Over,Over,Add,Screen,Multiply,Soft Light, Hard Light, Hard Mix,Overlay</Attribute>
        <!--===============================================================================================================-->
        <Attribute Name="A_minH" PrettyName="Min Hue" Group="Texture HSV" Type="double" Min="-180" Max="180">0</Attribute>
        <Attribute Name="A_maxH" PrettyName="Max Hue" Group="Texture HSV" Type="double" Min="-180" Max="180">0</Attribute>
        <Attribute Name="A_minS" PrettyName="Min Sat" Group="Texture HSV" Type="double" Min="0" Max="2">1</Attribute>
        <Attribute Name="A_maxS" PrettyName="Max Sat" Group="Texture HSV" Type="double" Min="0" Max="2">1</Attribute>
        <Attribute Name="A_minV" PrettyName="Min Val" Group="Texture HSV" Type="double" Min="0" Max="2">1</Attribute>
        <Attribute Name="A_maxV" PrettyName="Max Val" Group="Texture HSV" Type="double" Min="0" Max="2">1</Attribute>  
        <Attribute Name="Clamp" PrettyName="Clamp" Group="Texture HSV" Type="bool" Min="false" Max="true">true</Attribute>
        <Attribute Name="HSVSeed" PrettyName="HSV Seed" Group="Texture HSV" Type="double" Min="1" Max="1000">500</Attribute>
        <!--===============================================================================================================--> 
        <Attribute Name="MapA" PrettyName="MapA" Group="Texture Map A" Type="image" GenerateMipMaps="true"></Attribute>
        <Attribute Name="Invert_A" PrettyName="Invert Map" Group="Texture Map A" Type="bool" Min="false" Max="true">false</Attribute>
        <Attribute Name="radialFadeA" PrettyName="radialFade" Group="Texture Map A" Type="double" Min="0" Max="1">1</Attribute>  
        <Attribute Name="radialContrastA" PrettyName="radialFadeContrast" Group="Texture Map A" Type="double" Min="0" Max="2">1</Attribute>  
        <Attribute Name="MapA_Alpha" PrettyName="Alpha" Group="Texture Map A" Type="stringlist">From Map,From Map,Alpha is Luminance,Alpha is Inverse Luminance</Attribute>
        <!--===============================================================================================================-->
        <Attribute Name="MapB_weight" PrettyName="Importance" Group="Texture Map B" Type="double" Min="0" Max="1">0.25</Attribute>
        <Attribute Name="MapB" PrettyName="MapB" Group="Texture Map B" Type="image" GenerateMipMaps="true"></Attribute>
        <Attribute Name="Invert_B" PrettyName="Invert Map" Group="Texture Map B" Type="bool" Min="false" Max="true">false</Attribute>
        <Attribute Name="MapB_Alpha" PrettyName="Alpha" Group="Texture Map B" Type="stringlist">From Map,From Map,Alpha is Luminance,Alpha is Inverse Luminance</Attribute>
        <!--===============================================================================================================-->
        <Attribute Name="MapC_weight" PrettyName="Importance" Group="Texture Map C" Type="double" Min="0" Max="1">0.25</Attribute>
        <Attribute Name="MapC" PrettyName="MapC" Group="Texture Map C" Type="image" GenerateMipMaps="true"></Attribute>
        <Attribute Name="Invert_C" PrettyName="Invert Map" Group="Texture Map C" Type="bool" Min="false" Max="true">false</Attribute>
        <Attribute Name="MapC_Alpha" PrettyName="Alpha" Group="Texture Map C" Type="stringlist">From Map,From Map,Alpha is Luminance,Alpha is Inverse Luminance</Attribute>
        <!--===============================================================================================================-->
        <Attribute Name="MapD_weight" PrettyName="Importance" Group="Texture Map D" Type="double" Min="0" Max="1">0.25</Attribute>
        <Attribute Name="MapD" PrettyName="MapD" Group="Texture Map D" Type="image" GenerateMipMaps="true"></Attribute>
        <Attribute Name="Invert_D" PrettyName="Invert Map" Group="Texture Map D" Type="bool" Min="false" Max="true">false</Attribute>
        <Attribute Name="MapD_Alpha" PrettyName="Alpha" Group="Texture Map D" Type="stringlist">From Map,From Map,Alpha is Luminance,Alpha is Inverse Luminance</Attribute>
        <!--===============================================================================================================-->
    </Attributes>
  <Contexts>
        <Context Type="NodeGraphView">
            <Inputs>
                <Input Name="UV"><Pos>0,-50</Pos></Input>
            </Inputs>
        </Context>
        <Context Type="GLSL">
            <Shader>
                <Inputs>
                    <Input Name="UV"><Default>State.UV</Default></Input>
                    <Input Name="Position"><Default>State.Position</Default></Input>
                </Inputs>
                <Body><![CDATA[

                vec2 UV = fract(#UV);
                vec3 Pos = #Position;
                float scene = float($scene) + 1.0;
                float scale = ( (100.0 ) - $Scale*2.0) / scene;

                // passing booleans through as float !
                float clamp = float($Clamp);
                float invertA = float($Invert_A);
                float invertB = float($Invert_B);
                float invertC = float($Invert_C);
                float invertD = float($Invert_D);
                

                Output = JK_texScatter(UV,Pos,scale,$Frequency,$Layers,$NoiseScale,$jitterScale,$rot_min,$rot_max,$TextureCount,$BlendMode,$HSVSeed,$A_minH,$A_maxH,$A_minS,$A_maxS,$A_minV,$A_maxV,clamp,$MapA,invertA,$radialFadeA,$radialContrastA,$MapA_Alpha,$MapB,$MapB_weight,invertB,$MapB_Alpha,$MapC,$MapC_weight,invertC,$MapC_Alpha,$MapD,$MapD_weight,invertD,$MapD_Alpha);
                // Output = texture($MapMain,tmpuv.xy);


                ]]></Body>
            </Shader>
        </Context>
    </Contexts>
</Node>



